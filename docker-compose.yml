version: '3.8'

services:
  scraper:
    build:
      context: .
      dockerfile: scraper/Dockerfile
    container_name: battlesnake-scraper
    restart: unless-stopped
    environment:
      WRITTEN_LOG: /data/written_games.log
      OUT_DIR: /output
      DELAY: 500ms
    volumes:
      # Written-log persistence
      - ${SCRAPER_STATE_DIR:-./scraper-data}:/data
      # Training data output (set SCRAPER_OUT_DIR to control host destination)
      - ${SCRAPER_OUT_DIR:-./data}:/output